<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="611px" preserveAspectRatio="none" style="width:709px;height:611px;" version="1.1" viewBox="0 0 709 611" width="709px" zoomAndPan="magnify"><defs><filter height="300%" id="f1usawqnnj7cxd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="569" x="69" y="26.708">"PSC Discrepancy API: action diagram for status=COMPLETE"</text><ellipse cx="281.75" cy="40.9531" fill="#000000" filter="url(#f1usawqnnj7cxd)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="200.75" y="70.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="210.75" y="92.0918">PUT discrepancy report</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="210.75" y="106.0605">with status=COMPLETE</text><polygon fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" points="200.75,138.8906,362.75,138.8906,374.75,150.8906,362.75,162.8906,200.75,162.8906,188.75,150.8906,200.75,138.8906" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="200.75" y="154.6987">valid report and discrepancy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="174.75" y="148.2964">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="374.75" y="148.2964">yes</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="20.5" y="172.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="30.5" y="194.0293">set report.status=INVALID</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="30.5" y="207.998">:store in Mongo</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="10" y="254.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="20" y="275.9355">respond with error response</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="386.5" y="172.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="396.5" y="194.0293">update in MongoDB</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="398.5" y="240.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="408.5" y="261.9668">submit to CHIPS</text><polygon fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" points="403,308.7656,508,308.7656,520,320.7656,508,332.7656,403,332.7656,391,320.7656,403,308.7656" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="403" y="324.5737">submit succeeded</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="370" y="318.1714">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="520" y="318.1714">no</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="236" y="342.7656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="246" y="363.9043">set report.status=SUBMITTED</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="279.5" y="396.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="289.5" y="417.873">store in Mongo</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="454" y="342.7656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="464" y="363.9043">set report.status=FAILED_TO_SUBMIT</text><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="520.5" y="396.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="530.5" y="417.873">store in Mongo</text><polygon fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" points="455.5,436.7031,467.5,448.7031,455.5,460.7031,443.5,448.7031,455.5,436.7031" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="348" y="480.7031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="358" y="501.8418">respond with success response</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="358" y="515.8105">with report.status=COMPLETE</text><polygon fill="#FEFECE" filter="url(#f1usawqnnj7cxd)" points="281.75,534.6406,293.75,546.6406,281.75,558.6406,269.75,546.6406,281.75,534.6406" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="281.75" cy="589.6406" fill="#FFFFFF" filter="url(#f1usawqnnj7cxd)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="281.75" cy="589.6406" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="50.9531" y2="70.9531"/><polygon fill="#A80036" points="277.75,60.9531,281.75,70.9531,285.75,60.9531,281.75,64.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="220.8281" y2="254.7969"/><polygon fill="#A80036" points="104,244.7969,108,254.7969,112,244.7969,108,248.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="455.5" y1="206.8594" y2="240.8281"/><polygon fill="#A80036" points="451.5,230.8281,455.5,240.8281,459.5,230.8281,455.5,234.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335" x2="335" y1="376.7344" y2="396.7344"/><polygon fill="#A80036" points="331,386.7344,335,396.7344,339,386.7344,335,390.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="576" x2="576" y1="376.7344" y2="396.7344"/><polygon fill="#A80036" points="572,386.7344,576,396.7344,580,386.7344,576,390.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="391" x2="335" y1="320.7656" y2="320.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335" x2="335" y1="320.7656" y2="342.7656"/><polygon fill="#A80036" points="331,332.7656,335,342.7656,339,332.7656,335,336.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="520" x2="576" y1="320.7656" y2="320.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="576" x2="576" y1="320.7656" y2="342.7656"/><polygon fill="#A80036" points="572,332.7656,576,342.7656,580,332.7656,576,336.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335" x2="335" y1="430.7031" y2="448.7031"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="335" x2="443.5" y1="448.7031" y2="448.7031"/><polygon fill="#A80036" points="433.5,444.7031,443.5,448.7031,433.5,452.7031,437.5,448.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="576" x2="576" y1="430.7031" y2="448.7031"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="576" x2="467.5" y1="448.7031" y2="448.7031"/><polygon fill="#A80036" points="477.5,444.7031,467.5,448.7031,477.5,452.7031,473.5,448.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="455.5" y1="274.7969" y2="308.7656"/><polygon fill="#A80036" points="451.5,298.7656,455.5,308.7656,459.5,298.7656,455.5,302.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="455.5" y1="460.7031" y2="480.7031"/><polygon fill="#A80036" points="451.5,470.7031,455.5,480.7031,459.5,470.7031,455.5,474.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="188.75" x2="108" y1="150.8906" y2="150.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="150.8906" y2="172.8906"/><polygon fill="#A80036" points="104,162.8906,108,172.8906,112,162.8906,108,166.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="374.75" x2="455.5" y1="150.8906" y2="150.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="455.5" y1="150.8906" y2="172.8906"/><polygon fill="#A80036" points="451.5,162.8906,455.5,172.8906,459.5,162.8906,455.5,166.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="108" y1="288.7656" y2="546.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="108" x2="269.75" y1="546.6406" y2="546.6406"/><polygon fill="#A80036" points="259.75,542.6406,269.75,546.6406,259.75,550.6406,263.75,546.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="455.5" y1="528.6406" y2="546.6406"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="455.5" x2="293.75" y1="546.6406" y2="546.6406"/><polygon fill="#A80036" points="303.75,542.6406,293.75,546.6406,303.75,550.6406,299.75,546.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="118.8906" y2="138.8906"/><polygon fill="#A80036" points="277.75,128.8906,281.75,138.8906,285.75,128.8906,281.75,132.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="558.6406" y2="578.6406"/><polygon fill="#A80036" points="277.75,568.6406,281.75,578.6406,285.75,568.6406,281.75,572.6406" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[500adbfbb1bd362c2252d9be61d5bf2c]
@startuml
start
title "PSC Discrepancy API: action diagram for status=COMPLETE"


:PUT discrepancy report\nwith status=COMPLETE;
if (valid report and discrepancy) then (no)
    :set report.status=INVALID
    :store in Mongo;
    :respond with error response;
else (yes)
    :update in MongoDB;
    :submit to CHIPS;
    if (submit succeeded) then (yes)
        :set report.status=SUBMITTED;
        :store in Mongo;
    else (no)
        :set report.status=FAILED_TO_SUBMIT;
        :store in Mongo;
    endif
    :respond with success response\nwith report.status=COMPLETE;
endif

stop
@enduml

PlantUML version 1.2020.09beta17(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>