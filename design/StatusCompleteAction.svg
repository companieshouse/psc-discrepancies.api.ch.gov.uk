<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="583px" preserveAspectRatio="none" style="width:789px;height:583px;" version="1.1" viewBox="0 0 789 583" width="789px" zoomAndPan="magnify"><defs><filter height="300%" id="f1103kzroynyfi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="551" x="118" y="26.708">PSC Discrepancy API: action diagram for status=COMPLETE</text><ellipse cx="341.75" cy="40.9531" fill="#000000" filter="url(#f1103kzroynyfi)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="260.75" y="70.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="270.75" y="92.0918">PUT discrepancy report</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="135" x="270.75" y="106.0605">with status=COMPLETE</text><polygon fill="#FEFECE" filter="url(#f1103kzroynyfi)" points="260.75,138.8906,422.75,138.8906,434.75,150.8906,422.75,162.8906,260.75,162.8906,248.75,150.8906,260.75,138.8906" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="260.75" y="154.6987">valid report and discrepancy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="234.75" y="148.2964">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="434.75" y="148.2964">yes</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="60.5" y="172.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="70.5" y="194.0293">set report.status=INVALID</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="92.5" y="226.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="102.5" y="247.998">store in Mongo</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="276" x="10" y="280.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="256" x="20" y="301.9668">respond with Bad Request error response</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="466.5" y="172.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="118" x="476.5" y="194.0293">update in MongoDB</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="114" x="478.5" y="226.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="488.5" y="247.998">submit to CHIPS</text><polygon fill="#FEFECE" filter="url(#f1103kzroynyfi)" points="483,280.8281,588,280.8281,600,292.8281,588,304.8281,483,304.8281,471,292.8281,483,280.8281" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="483" y="296.6362">submit succeeded</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="450" y="290.2339">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="600" y="290.2339">no</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="198" x="316" y="314.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="178" x="326" y="335.9668">set report.status=SUBMITTED</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="359.5" y="368.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="369.5" y="389.9355">store in Mongo</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="244" x="534" y="314.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="224" x="544" y="335.9668">set report.status=FAILED_TO_SUBMIT</text><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="600.5" y="368.7969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="610.5" y="389.9355">store in Mongo</text><polygon fill="#FEFECE" filter="url(#f1103kzroynyfi)" points="535.5,408.7656,547.5,420.7656,535.5,432.7656,523.5,420.7656,535.5,408.7656" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1103kzroynyfi)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="215" x="428" y="452.7656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="438" y="473.9043">respond with success response</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="438" y="487.873">with report.status=COMPLETE</text><polygon fill="#FEFECE" filter="url(#f1103kzroynyfi)" points="341.75,506.7031,353.75,518.7031,341.75,530.7031,329.75,518.7031,341.75,506.7031" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="341.75" cy="561.7031" fill="#FFFFFF" filter="url(#f1103kzroynyfi)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="341.75" cy="561.7031" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341.75" x2="341.75" y1="50.9531" y2="70.9531"/><polygon fill="#A80036" points="337.75,60.9531,341.75,70.9531,345.75,60.9531,341.75,64.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148" x2="148" y1="206.8594" y2="226.8594"/><polygon fill="#A80036" points="144,216.8594,148,226.8594,152,216.8594,148,220.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148" x2="148" y1="260.8281" y2="280.8281"/><polygon fill="#A80036" points="144,270.8281,148,280.8281,152,270.8281,148,274.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="535.5" y1="206.8594" y2="226.8594"/><polygon fill="#A80036" points="531.5,216.8594,535.5,226.8594,539.5,216.8594,535.5,220.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="415" x2="415" y1="348.7969" y2="368.7969"/><polygon fill="#A80036" points="411,358.7969,415,368.7969,419,358.7969,415,362.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656" x2="656" y1="348.7969" y2="368.7969"/><polygon fill="#A80036" points="652,358.7969,656,368.7969,660,358.7969,656,362.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="471" x2="415" y1="292.8281" y2="292.8281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="415" x2="415" y1="292.8281" y2="314.8281"/><polygon fill="#A80036" points="411,304.8281,415,314.8281,419,304.8281,415,308.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="600" x2="656" y1="292.8281" y2="292.8281"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656" x2="656" y1="292.8281" y2="314.8281"/><polygon fill="#A80036" points="652,304.8281,656,314.8281,660,304.8281,656,308.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="415" x2="415" y1="402.7656" y2="420.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="415" x2="523.5" y1="420.7656" y2="420.7656"/><polygon fill="#A80036" points="513.5,416.7656,523.5,420.7656,513.5,424.7656,517.5,420.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656" x2="656" y1="402.7656" y2="420.7656"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656" x2="547.5" y1="420.7656" y2="420.7656"/><polygon fill="#A80036" points="557.5,416.7656,547.5,420.7656,557.5,424.7656,553.5,420.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="535.5" y1="260.8281" y2="280.8281"/><polygon fill="#A80036" points="531.5,270.8281,535.5,280.8281,539.5,270.8281,535.5,274.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="535.5" y1="432.7656" y2="452.7656"/><polygon fill="#A80036" points="531.5,442.7656,535.5,452.7656,539.5,442.7656,535.5,446.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="248.75" x2="148" y1="150.8906" y2="150.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148" x2="148" y1="150.8906" y2="172.8906"/><polygon fill="#A80036" points="144,162.8906,148,172.8906,152,162.8906,148,166.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="434.75" x2="535.5" y1="150.8906" y2="150.8906"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="535.5" y1="150.8906" y2="172.8906"/><polygon fill="#A80036" points="531.5,162.8906,535.5,172.8906,539.5,162.8906,535.5,166.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148" x2="148" y1="314.7969" y2="518.7031"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="148" x2="329.75" y1="518.7031" y2="518.7031"/><polygon fill="#A80036" points="319.75,514.7031,329.75,518.7031,319.75,522.7031,323.75,518.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="535.5" y1="500.7031" y2="518.7031"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="535.5" x2="353.75" y1="518.7031" y2="518.7031"/><polygon fill="#A80036" points="363.75,514.7031,353.75,518.7031,363.75,522.7031,359.75,518.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341.75" x2="341.75" y1="118.8906" y2="138.8906"/><polygon fill="#A80036" points="337.75,128.8906,341.75,138.8906,345.75,128.8906,341.75,132.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341.75" x2="341.75" y1="530.7031" y2="550.7031"/><polygon fill="#A80036" points="337.75,540.7031,341.75,550.7031,345.75,540.7031,341.75,544.7031" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[edb30cc3414d86457e597f29fcfb39f8]
@startuml
start
title PSC Discrepancy API: action diagram for status=COMPLETE


:PUT discrepancy report\nwith status=COMPLETE;
if (valid report and discrepancy) then (no)
    :set report.status=INVALID;
    :store in Mongo;
    :respond with Bad Request error response;
else (yes)
    :update in MongoDB;
    :submit to CHIPS;
    if (submit succeeded) then (yes)
        :set report.status=SUBMITTED;
        :store in Mongo;
    else (no)
        :set report.status=FAILED_TO_SUBMIT;
        :store in Mongo;
    endif
    :respond with success response\nwith report.status=COMPLETE;
endif

stop
@enduml

PlantUML version 1.2020.09(Sun May 10 10:51:06 UTC 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 14.0.1+7
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>